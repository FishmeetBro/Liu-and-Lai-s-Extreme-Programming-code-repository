{"remainingRequest":"D:\\test\\smart-agriculture\\address_book\\address_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\test\\smart-agriculture\\address_book\\address_vue\\src\\views\\relevance.vue?vue&type=style&index=0&id=a9c51ba2&scoped=true&lang=css","dependencies":[{"path":"D:\\test\\smart-agriculture\\address_book\\address_vue\\src\\views\\relevance.vue","mtime":1732392431865},{"path":"D:\\test\\smart-agriculture\\address_book\\address_vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1724981059493},{"path":"D:\\test\\smart-agriculture\\address_book\\address_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1724981061960},{"path":"D:\\test\\smart-agriculture\\address_book\\address_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1724981060479},{"path":"D:\\test\\smart-agriculture\\address_book\\address_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724981058651},{"path":"D:\\test\\smart-agriculture\\address_book\\address_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1724981061202}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiA6OnYtZGVlcCAudnVlLXRyZWVzZWxlY3RfX2NvbnRyb2x7CiAgaGVpZ2h0OiAyOHB4Owp9CiA6OnYtZGVlcCAuZWwtZm9ybS1pdGVtX19jb250ZW50ewogICBsaW5lLWhlaWdodDogMjhweDsKICAgZm9udC1zaXplOiAxMnB4OwogfQo="},{"version":3,"sources":["relevance.vue"],"names":[],"mappings":";AAyUA;AACA;AACA;AACA;AACA;AACA;AACA","file":"relevance.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <el-dialog :title=\"title\" :visible.sync=\"visible\" :close-on-click-modal=\"false\" @opened=\"openFun\">\n    <el-form :model=\"dynamicValidateForm\" ref=\"dynamicValidateForm\" label-width=\"100px\" class=\"demo-dynamic\">\n\n  <el-form-item\n    v-for=\"(domain, index) in dynamicValidateForm.phoneList\"\n    :label=\"'电话' + index\"\n    :key=\"domain.key\"\n    :prop=\"'phoneList.' + index + '.value'\"\n    :rules=\"{\n      required: true, message: '电话不能为空', trigger: 'blur'\n    }\"\n  >\n    <el-input v-model=\"domain.value\"></el-input><el-button @click.prevent=\"removeDomainPhone(domain)\">删除</el-button>\n    <el-button @click.prevent=\"addDomainPhone\">新增</el-button>\n    \n  </el-form-item>\n\n  <el-form-item\n    v-for=\"(domain, index) in dynamicValidateForm.emailList\"\n    :label=\"'邮箱' + index\"\n    :key=\"domain.key\"\n    :prop=\"'emailList.' + index + '.value'\"\n    :rules=\"{\n      required: true, message: '邮箱不能为空', trigger: 'blur'\n    }\"\n  >\n    <el-input v-model=\"domain.value\"></el-input><el-button @click.prevent=\"removeDomainEmail(domain)\">删除</el-button>\n    <el-button @click.prevent=\"addDomainEmail\">新增</el-button>\n    \n  </el-form-item>\n\n  <el-form-item\n    v-for=\"(domain, index) in dynamicValidateForm.socialList\"\n    :label=\"'社交账号' + index\"\n    :key=\"domain.key\"\n    :prop=\"'socialList.' + index + '.value'\"\n    :rules=\"{\n      required: true, message: '社交账号不能为空', trigger: 'blur'\n    }\"\n  >\n    <el-input v-model=\"domain.value\"></el-input><el-button @click.prevent=\"removeDomainSocial(domain)\">删除</el-button>\n    <el-button @click.prevent=\"addDomainSocial\">新增</el-button>\n    \n  </el-form-item>\n\n  <el-form-item\n    v-for=\"(domain, index) in dynamicValidateForm.addressList\"\n    :label=\"'地址' + index\"\n    :key=\"domain.key\"\n    :prop=\"'addressList.' + index + '.value'\"\n    :rules=\"{\n      required: true, message: '地址不能为空', trigger: 'blur'\n    }\"\n  >\n    <el-input v-model=\"domain.value\"></el-input><el-button @click.prevent=\"removeDomainAddress(domain)\">删除</el-button>\n    <el-button @click.prevent=\"addDomainAddress\">新增</el-button>\n    \n  </el-form-item>\n\n\n</el-form>\n    <span slot=\"footer\">\n      <el-button type=\"primary\" @click=\"submitForm('dynamicValidateForm')\">提交</el-button>\n    <el-button @click=\"resetForm('dynamicValidateForm')\">重置</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\n\n\nexport default {\n  name: \"relevance\",\n  props: {\n    dialogVisible: {\n      type: Boolean,\n      require: true,\n      default: false\n    },\n    userObj: Object\n  },\n  computed: {\n    visible: {\n      get: function () {\n        return this.dialogVisible\n      },\n      set: function (val) {\n        this.$emit('update:dialogVisible', val)\n      }\n    }\n  },\n  data(){\n    return{\n      title: '新增关联信息',\n      isLoading: false,\n\n      dynamicValidateForm: {\n\n         id:'',\n\n          phoneList: [{\n            value: ''\n          }],\n          emailList: [{\n            value: ''\n          }],\n          addressList: [{\n            value: ''\n          }],\n          socialList: [{\n            value: ''\n          }],\n        },\n\n        dynamicValidateForm2: {\n\nid:'',\n\n phoneList: [],\n emailList: [],\n addressList: [],\n socialList: [],\n},\n\n\n\n    }\n  },\n  methods: {\n\n    openFun(){\n      console.log(\"打开\")\n      this.dynamicValidateForm.id = this.userObj.id;\n      console.log(this.userObj)\n\n      //遍历赋值\n      if(this.userObj.infosDTO.phoneList){\n        \n        this.dynamicValidateForm.phoneList = []\n        for(var i = 0; i < this.userObj.infosDTO.phoneList.length; i++){\n          this.dynamicValidateForm.phoneList.push({value:this.userObj.infosDTO.phoneList[i]});\n        }\n      }\n\n      if(this.userObj.infosDTO.emailList){\n        this.dynamicValidateForm.emailList = []\n        for(var i2 = 0; i2 < this.userObj.infosDTO.emailList.length; i2++){\n          this.dynamicValidateForm.emailList.push({value:this.userObj.infosDTO.emailList[i2]});\n        }\n      }\n\n      if(this.userObj.infosDTO.addressList){\n        this.dynamicValidateForm.addressList = []\n        for(var i3 = 0; i3 < this.userObj.infosDTO.addressList.length; i3++){\n          this.dynamicValidateForm.addressList.push({value:this.userObj.infosDTO.addressList[i3]});\n        }\n      }\n\n      if(this.userObj.infosDTO.socialList){\n        this.dynamicValidateForm.socialList = []\n        for(var i4 = 0; i4 < this.userObj.infosDTO.socialList.length; i4++){\n          this.dynamicValidateForm.socialList.push({value:this.userObj.infosDTO.socialList[i4]});\n        }\n      }\n      \n\n      if (this.userObj.id){\n\n        this.title = '编辑关联信息'\n        this.userForm = this.userObj\n        //this.userForm.roleIds = this.userForm.roleIds[0].split(',')\n        //  将roleIds中的字符串数字转化为数字\n        //this.userForm.roleIds = this.userForm.roleIds.map(Number)\n      }\n    },\n\n    submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            alert('submit!');\n            console.log(\"提交\")\n            console.log(this.dynamicValidateForm)\n\n            //把数据都遍历到dynamicValidateForm2\n            this.dynamicValidateForm2.id = this.dynamicValidateForm.id\n\n            this.dynamicValidateForm2.phoneList = []\n            this.dynamicValidateForm2.emailList = []\n            this.dynamicValidateForm2.addressList = []\n            this.dynamicValidateForm2.socialList = []\n\n            for(var i = 0; i < this.dynamicValidateForm.phoneList.length; i++){\n              this.dynamicValidateForm2.phoneList.push(this.dynamicValidateForm.phoneList[i].value);\n        \n              }\n\n              for(var i2 = 0; i2 < this.dynamicValidateForm.emailList.length; i2++){\n              this.dynamicValidateForm2.emailList.push(this.dynamicValidateForm.emailList[i2].value);\n        \n              }\n\n              for(var i3 = 0; i3 < this.dynamicValidateForm.addressList.length; i3++){\n              this.dynamicValidateForm2.addressList.push(this.dynamicValidateForm.addressList[i3].value);\n        \n              }\n\n              for(var i4 = 0; i4 < this.dynamicValidateForm.socialList.length; i4++){\n              this.dynamicValidateForm2.socialList.push(this.dynamicValidateForm.socialList[i4].value);\n        \n              }\n\n              console.log(\"最好提交是的：\")\n            console.log(this.dynamicValidateForm2)\n\n           \n\n            editInfos(this.dynamicValidateForm2).then(res => {\n              console.log(res)\n              this.resetForm('dynamicValidateForm')\n            if (res.success){\n              successMsg(res.data)\n              this.visible = false\n              this.$emit('get-list')\n            } else {\n              errorMsg(res.msg)\n            }\n            this.isLoading = false\n          })\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n      removeDomainPhone(item) {\n        var index = this.dynamicValidateForm.phoneList.indexOf(item)\n\n\n        if (index !== -1) {\n          this.dynamicValidateForm.phoneList.splice(index, 1)\n        }\n      },\n      addDomainPhone() {\n\n        //判断是否为空为空不能再添加，全部遍历\n        for(var i = 0; i < this.dynamicValidateForm.phoneList.length; i++){\n          if(this.dynamicValidateForm.phoneList[i].value === null || this.dynamicValidateForm.phoneList[i].value === ''){\n            this.$message.error('请输入手机号')\n            return;\n          }\n        }\n\n        this.dynamicValidateForm.phoneList.push({\n          value: '',\n          key: Date.now()\n        });\n      },\n\n      removeDomainEmail(item) {\n        var index = this.dynamicValidateForm.emailList.indexOf(item)\n        if (index !== -1) {\n          this.dynamicValidateForm.emailList.splice(index, 1)\n        }\n      },\n      addDomainEmail() {\n        for(var i = 0; i < this.dynamicValidateForm.emailList.length; i++){\n          if(this.dynamicValidateForm.emailList[i].value === null || this.dynamicValidateForm.emailList[i].value === ''){\n            this.$message.error('请输入邮箱')\n            return;\n          }\n        }\n\n        this.dynamicValidateForm.emailList.push({\n          value: '',\n          key: Date.now()\n        });\n      },\n\n      removeDomainAddress(item) {\n        var index = this.dynamicValidateForm.addressList.indexOf(item)\n        if (index !== -1) {\n          this.dynamicValidateForm.addressList.splice(index, 1)\n        }\n      },\n\n      addDomainAddress() {\n\n        for(var i = 0; i < this.dynamicValidateForm.addressList.length; i++){\n          if(this.dynamicValidateForm.addressList[i].value === null || this.dynamicValidateForm.addressList[i].value === ''){\n            this.$message.error('请输入地址')\n            return;\n          }\n        }\n\n        this.dynamicValidateForm.addressList.push({\n          value: '',\n          key: Date.now()\n        });\n      },\n\n      removeDomainSocial(item) {\n        var index = this.dynamicValidateForm.socialList.indexOf(item)\n        if (index !== -1) {\n          this.dynamicValidateForm.socialList.splice(index, 1)\n        }\n      },\n      addDomainSocial() {\n\n        for(var i = 0; i < this.dynamicValidateForm.socialList.length; i++){\n          if(this.dynamicValidateForm.socialList[i].value === null || this.dynamicValidateForm.socialList[i].value === ''){\n            this.$message.error('请输入社交账号')\n            return;\n          }\n        }\n\n        this.dynamicValidateForm.socialList.push({\n          value: '',\n          key: Date.now()\n        });\n      },\n  }\n}\n</script>\n\n<style scoped>\n ::v-deep .vue-treeselect__control{\n  height: 28px;\n}\n ::v-deep .el-form-item__content{\n   line-height: 28px;\n   font-size: 12px;\n }\n</style>"]}]}